<!DOCTYPE html>
<html lang="vi">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<!-- SEO Meta Tags -->
		<title>Kết Quả Tìm Kiếm | HUB University</title>
		<meta
			name="description"
			content="Kết quả tìm kiếm tại Trường Đại học Ngân hàng TP. Hồ Chí Minh - Tìm thông tin về chương trình đào tạo, tuyển sinh và các hoạt động"
		/>
		<meta
			name="keywords"
			content="tìm kiếm HUB, search HUB, kết quả tìm kiếm"
		/>
		<meta name="author" content="HUB University" />
		<meta name="robots" content="index, follow" />

		<!-- Open Graph -->
		<meta property="og:type" content="website" />
		<meta property="og:title" content="Kết Quả Tìm Kiếm - HUB University" />
		<meta
			property="og:description"
			content="Kết quả tìm kiếm tại HUB University"
		/>
		<meta property="og:url" content="https://hub.edu.vn/ket-qua-tim-kiem" />
		<meta property="og:locale" content="vi_VN" />

		<!-- Favicon -->
		<link rel="icon" type="image/x-icon" href="/favicon.ico" />
		<link
			rel="icon"
			type="image/png"
			sizes="32x32"
			href="/favicon-32x32.png"
		/>
		<link
			rel="icon"
			type="image/png"
			sizes="16x16"
			href="/favicon-16x16.png"
		/>
		<link rel="apple-touch-icon" href="/apple-touch-icon.png" />

		<!-- Preconnect -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link rel="preconnect" href="https://cdn.jsdelivr.net" />

		<!-- Google Fonts -->
		<link
			rel="stylesheet"
			href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
		/>
		<link
			rel="stylesheet"
			href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,400;0,500;0,600;0,700;1,400&display=swap"
		/>

		<!-- Bootstrap CSS -->
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>

		<!-- Iconify -->
		<script src="https://code.iconify.design/3/3.1.0/iconify.min.js"></script>

		<!-- Custom CSS -->
		<link rel="stylesheet" href="/css/variables.css" />
		<link rel="stylesheet" href="/css/base.css" />
		<link rel="stylesheet" href="/css/components/topbar.css" />
		<link rel="stylesheet" href="/css/components/navbar.css" />
		<link rel="stylesheet" href="/css/components/footer.css" />
		<link rel="stylesheet" href="/css/components/breadcrumb.css" />
		<link rel="stylesheet" href="/css/pages/search-results.css" />
	</head>
	<body>
		<!-- HEADER: Topbar + Navbar -->
		<div data-include="/partials/header.html"></div>

		<!-- Main Content -->
		<main class="search-results-page">
			<!-- SECTION: Hero -->
			<section class="search-results-hero" aria-label="Banner tìm kiếm">
				<img
					src="/assets/images/timkiem_hero.png"
					alt="Kết quả tìm kiếm HUB University"
					class="search-results-hero__image"
				/>
			</section>

			<!-- Breadcrumb Navigation - Mobile only -->
			<nav class="hero-breadcrumb d-sm-none" aria-label="Breadcrumb">
				<div class="container">
					<ol class="hero-breadcrumb__list">
						<li class="hero-breadcrumb__item">
							<a href="/" class="hero-breadcrumb__link">Trang chủ</a>
						</li>
						<li class="hero-breadcrumb__item hero-breadcrumb__item--active">
							<span class="hero-breadcrumb__current">Kết quả tìm kiếm</span>
						</li>
					</ol>
				</div>
			</nav>

			<!-- SECTION: Search Box & Results Combined -->
			<section class="search-filter">
				<div class="container">
					<div class="row">
						<div class="col-12">
							<!-- Custom Search Box -->
							<div class="custom-search-box">
								<div class="custom-search-wrapper">
									<input
										type="text"
										class="custom-search-input"
										id="searchInput"
										placeholder="Tìm kiếm..."
										autocomplete="off"
									/>
									<button
										class="custom-clear-btn"
										id="clearBtn"
										style="display: none"
									>
										<svg
											width="20"
											height="20"
											viewBox="0 0 24 24"
											fill="none"
											stroke="currentColor"
											stroke-width="2"
										>
											<line
												x1="18"
												y1="6"
												x2="6"
												y2="18"
											></line>
											<line
												x1="6"
												y1="6"
												x2="18"
												y2="18"
											></line>
										</svg>
									</button>
									<button
										class="custom-search-btn"
										id="searchBtn"
									>
										<svg
											width="20"
											height="20"
											viewBox="0 0 24 24"
											fill="none"
											stroke="currentColor"
											stroke-width="2"
										>
											<circle
												cx="11"
												cy="11"
												r="8"
											></circle>
											<path d="m21 21-4.35-4.35"></path>
										</svg>
									</button>
								</div>
							</div>

							<!-- Hidden Google Custom Search (for functionality) -->
							<div style="display: none">
								<div
									class="gcse-searchbox-only"
									data-resultsUrl="/ket-qua-tim-kiem.html"
								></div>
							</div>

							<!-- Search Results Container -->
							<div class="search-filter__results">
								<!-- Google Custom Search Results -->
								<div class="gcse-searchresults-only"></div>
							</div>
						</div>
					</div>
				</div>
			</section>
		</main>

		<!-- FOOTER -->
		<div data-include="/partials/footer.html"></div>

		<!-- Bootstrap 5 JS -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

		<!-- Google Custom Search Engine -->
		<script
			async
			src="https://cse.google.com/cse.js?cx=042ef78de73db43ac"
		></script>

		<!-- Include Loader -->
		<script>
			// Simple include loader
			document.querySelectorAll("[data-include]").forEach(async (el) => {
				const file = el.getAttribute("data-include");
				const response = await fetch(file);
				el.innerHTML = await response.text();
			});
		</script>

		<!-- Custom Search Box JavaScript -->
		<script>
			document.addEventListener("DOMContentLoaded", function () {
				// Get elements
				const searchInput = document.getElementById("searchInput");
				const searchBtn = document.getElementById("searchBtn");
				const clearBtn = document.getElementById("clearBtn");
				const resultsContainer = document.querySelector(
					".search-filter__results"
				);

				// Get URL parameters
				const urlParams = new URLSearchParams(window.location.search);
				const query =
					urlParams.get("q") || urlParams.get("query") || "";

				// Set initial search value
				if (query) {
					searchInput.value = query;
					clearBtn.style.display = "block";
				}

				// Handle search
				function performSearch() {
					const searchTerm = searchInput.value.trim();
					if (searchTerm) {
						// Navigate to search results page with query
						window.location.href =
							"/ket-qua-tim-kiem.html?q=" +
							encodeURIComponent(searchTerm);
					}
				}

				// Search button click
				searchBtn.addEventListener("click", performSearch);

				// Enter key press
				searchInput.addEventListener("keypress", function (e) {
					if (e.key === "Enter") {
						performSearch();
					}
				});

				// Show/hide clear button
				searchInput.addEventListener("input", function () {
					clearBtn.style.display = this.value ? "block" : "none";
				});

				// Clear button click
				clearBtn.addEventListener("click", function () {
					searchInput.value = "";
					clearBtn.style.display = "none";
					searchInput.focus();
				});

				// Google Custom Search configuration
				window.__gcse = window.__gcse || {};
				window.__gcse.callback = function () {
					if (
						window.google &&
						window.google.search &&
						window.google.search.cse
					) {
						const originalRenderFunction =
							window.google.search.cse.element.render;
						window.google.search.cse.element.render = function (
							componentConfig,
							componentElement
						) {
							if (componentConfig) {
								componentConfig.queryParameterName = "q";
								componentConfig.resultsUrl =
									"/ket-qua-tim-kiem.html";
								componentConfig.noResultsString =
									"Không tìm thấy kết quả nào cho từ khóa của bạn.";
								componentConfig.overlayResults = false;

								// Check current tab and configure accordingly
								const activeTab =
									document.querySelector(
										".search-tab.active"
									);
								if (
									activeTab &&
									activeTab.dataset.tab === "images"
								) {
									// Force image search
									componentConfig.defaultToImageSearch = true;
									componentConfig.imageSearchLayout = "popup";
									componentConfig.enableImageSearch = true;
									componentConfig.disableWebSearch = true;
								} else if (
									activeTab &&
									activeTab.dataset.tab === "videos"
								) {
									// Add video search refinement
									componentConfig.webSearchQueryAddition =
										"video youtube";
								}
							}
							return originalRenderFunction.call(
								this,
								componentConfig,
								componentElement
							);
						};
					}
				};

				// Remove overlay behaviors and customize pagination
				const observer = new MutationObserver(function (mutations) {
					if (
						document.body.classList.contains("gsc-overflow-hidden")
					) {
						document.body.classList.remove("gsc-overflow-hidden");
					}

					const overlayElements = document.querySelectorAll(
						".gsc-results-wrapper-overlay"
					);
					overlayElements.forEach(function (el) {
						el.classList.remove("gsc-results-wrapper-overlay");
						el.classList.add("gsc-results-wrapper-inline");
					});

					// Customize pagination
					customizePagination();
				});

				observer.observe(document.body, {
					attributes: true,
					childList: true,
					subtree: true,
					attributeFilter: ["class"],
				});

				// Function to customize Google CSE pagination
				function customizePagination() {
					const cursorBox = document.querySelector(".gsc-cursor-box");
					if (!cursorBox) return;

					// Check if already customized
					if (cursorBox.classList.contains("pagination-customized")) return;
					cursorBox.classList.add("pagination-customized");

					const pages = Array.from(cursorBox.querySelectorAll(".gsc-cursor-page"));
					if (pages.length <= 1) return;

					const totalPages = pages.length;
					let currentPageIndex = 0;

					// Find current page
					pages.forEach((page, index) => {
						if (page.classList.contains("gsc-cursor-current-page")) {
							currentPageIndex = index;
						}
					});

					// Create new custom pagination container
					const customPagination = document.createElement("div");
					customPagination.className = "custom-pagination";

					// Left arrow
					const leftArrow = document.createElement("button");
					leftArrow.className = "pagination-arrow pagination-arrow--prev";
					leftArrow.innerHTML = `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 18l-6-6 6-6"/></svg>`;
					leftArrow.disabled = currentPageIndex === 0;
					leftArrow.onclick = function () {
						if (currentPageIndex > 0) pages[currentPageIndex - 1].click();
					};
					customPagination.appendChild(leftArrow);

					// Determine which pages to show
					const pagesToShow = [];
					for (let i = 0; i < totalPages; i++) {
						const isFirst = i === 0;
						const isLast = i === totalPages - 1;
						const isCurrent = i === currentPageIndex;
						const isNearCurrent = Math.abs(i - currentPageIndex) <= 1;

						if (isFirst || isLast || isCurrent || isNearCurrent) {
							pagesToShow.push({ index: i, type: "page" });
						}
					}

					// Add ellipsis where there are gaps
					const finalItems = [];
					for (let i = 0; i < pagesToShow.length; i++) {
						const current = pagesToShow[i];
						const prev = pagesToShow[i - 1];

						// Add ellipsis if there's a gap
						if (prev && current.index - prev.index > 1) {
							finalItems.push({ type: "ellipsis" });
						}
						finalItems.push(current);
					}

					// Function to scroll to search filter section
					function scrollToSearchFilter() {
						const searchFilter = document.querySelector(".search-filter");
						if (searchFilter) {
							searchFilter.scrollIntoView({ behavior: "smooth", block: "start" });
						}
					}

					// Render pagination items
					finalItems.forEach((item) => {
						if (item.type === "ellipsis") {
							const ellipsis = document.createElement("span");
							ellipsis.className = "pagination-ellipsis";
							ellipsis.textContent = "...";
							customPagination.appendChild(ellipsis);
						} else {
							const pageClone = pages[item.index].cloneNode(true);
							pageClone.onclick = function () {
								pages[item.index].click();
								scrollToSearchFilter();
							};
							customPagination.appendChild(pageClone);
						}
					});

					// Right arrow
					const rightArrow = document.createElement("button");
					rightArrow.className = "pagination-arrow pagination-arrow--next";
					rightArrow.innerHTML = `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>`;
					rightArrow.disabled = currentPageIndex === totalPages - 1;
					rightArrow.onclick = function () {
						if (currentPageIndex < totalPages - 1) pages[currentPageIndex + 1].click();
					};
					customPagination.appendChild(rightArrow);

					// Hide original pagination and show custom one
					const originalContent = cursorBox.querySelector(".gsc-cursor");
					if (originalContent) {
						originalContent.style.display = "none";
					}
					cursorBox.appendChild(customPagination);
				}
			});
		</script>
	</body>
</html>
